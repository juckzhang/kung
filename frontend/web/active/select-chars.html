<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
  <meta name="format-detection" content="telephone=no" />
  <title></title>
  <link href="/css/common.css" rel=stylesheet>
  <script src="/js/jquery-3.1.1.js" ></script>
  <style>
    .content_list {
      background: #fff;
      margin: 10px;
      padding: 0.15rem 0 0.15rem 0.15rem;
    }
    .select_text {
      display: inline-block;
      width: 0.35rem;
      height: 0.35rem;
      line-height: 0.35rem;
    }
    .button_con {
      display: inherit;
      width: 1.5rem;
      height: 0.35rem;
      margin: 0 auto;
      border-radius: 0.06rem;
      text-align: center;
    }
  </style>
</head>
<body class="bg_2">
<header class="bg_1 header" id="back">
  <i class="rt_pos"></i>
  step 1/3
</header>
<div class="fs_14">
  <div class="content_list">
    <label class="choose-box">
      <input type="checkbox" />
      <span class="bg_1 select_text color_3 chars">刘</span>
    </label>
    <label class="choose-box">
      <input type="checkbox" />
      <span class="bg_1 select_text color_3 chars">刘</span>
    </label>
    <label class="choose-box">
      <input type="checkbox" />
      <span class="bg_1 select_text color_3 chars">刘</span>
    </label>
    <label class="choose-box">
      <input type="checkbox" />
      <span class="bg_1 select_text color_3 chars">刘</span>
    </label>
    <label class="choose-box">
      <input type="checkbox" />
      <span class="bg_1 select_text color_3 chars">刘</span>
    </label>
    <label class="choose-box">
      <input type="checkbox" />
      <span class="bg_1 select_text color_3 chars">刘</span>
    </label>
    <label class="choose-box">
      <input type="checkbox" />
      <span class="bg_1 select_text color_3 chars">刘</span>
    </label>
    <label class="choose-box">
      <input type="checkbox" />
      <span class="bg_1 select_text color_3 chars">刘</span>
    </label>
    <label class="choose-box">
      <input type="checkbox" />
      <span class="bg_1 select_text color_3 chars">刘</span>
    </label>
    <label class="choose-box">
      <input type="checkbox" />
      <span class="bg_1 select_text color_3 chars">刘</span>
    </label>
    <label class="choose-box">
      <input type="checkbox" />
      <span class="bg_1 select_text color_3 chars">刘</span>
    </label>
    <label class="choose-box">
      <input type="checkbox" />
      <span class="bg_1 select_text color_3 chars">刘</span>
    </label>
    <label class="choose-box">
      <input type="checkbox" />
      <span class="bg_1 select_text color_3 chars">刘</span>
    </label>
    <label class="choose-box">
      <input type="checkbox" />
      <span class="bg_1 select_text color_3 chars">刘</span>
    </label>
    <label class="choose-box">
      <input type="checkbox" />
      <span class="bg_1 select_text color_3 chars">刘</span>
    </label>
    <label class="choose-box">
      <input type="checkbox" />
      <span class="bg_1 select_text color_3 chars">刘</span>
    </label>
    <label class="choose-box">
      <input type="checkbox" />
      <span class="bg_1 select_text color_3 chars">刘</span>
    </label>
    <label class="choose-box">
      <input type="checkbox" />
      <span class="bg_1 select_text color_3 chars">刘</span>
    </label>
    <label class="choose-box">
      <input type="checkbox" />
      <span class="bg_1 select_text color_3 chars">刘</span>
    </label>
    <label class="choose-box">
      <input type="checkbox" />
      <span class="bg_1 select_text color_3 chars">刘</span>
    </label>
    <label class="choose-box">
      <input type="checkbox" />
      <span class="bg_1 select_text color_3 chars">刘</span>
    </label>
    <label class="choose-box">
      <input type="checkbox" />
      <span class="bg_1 select_text color_3 chars">刘</span>
    </label>
    <label class="choose-box">
      <input type="checkbox" />
      <span class="bg_1 select_text color_3 chars">刘</span>
    </label>
    <label class="choose-box">
      <input type="checkbox" />
      <span class="bg_1 select_text color_3 chars">刘</span>
    </label>
  </div>
</div>
<button class="button_con bg_1 color_3 fs_14" id="next" data-num="0" data-chars="" data-next="0">
  Continue
</button>
</body>
<script>
    function get_query(variable)
    {
        var query = window.location.search.substring(1);
        var vars = query.split("&");
        for (var i=0;i<vars.length;i++) {
            var pair = vars[i].split("=");
            if(pair[0] == variable){return pair[1];}
        }
        return(false);
    }

    $(function () {
        var chars = get_query('chars');
        var num = get_query('num');
        //内容填充
        if(!chars){
            $.get('/user/chars.json', function (data) {
                var chs = data['data'];
                $('.chars').each(function (i) {
                    var char = chs[i];
                    $(this).text(char);
                });
                var otherchars = chs.slice(40, 80);
                otherchars = JSON.stringify(otherchars);
                $('#next').data('chars', otherchars);
            });
        }else{
            $('#back').html('<i class="rt_pos"></i>step 2/3');
            chars = JSON.parse(decodeURI(chars));
            $('.chars').each(function (i) {
                var char = chars[i];
                $(this).text(char);
            });
            $('#next').data('num', num);
            $('#next').data('next', '1');
        }

        //$(":radio")
        $(":checkbox").click(function () {
            var num = parseInt($('#next').data('num'));
            var is = $(this).attr('checked');
            if(is){
                $(this).removeAttr('checked');
                num = num - 1;
            }else {
                $(this).attr("checked",'checked');
                num = num + 1;
            }
            $('#next').data('num', num);
        });

        //返回键
        $('#back').on('click', function (event) {
            history.back(-1);
        });

        //下一步
        $('#next').on('click', function (event) {
            var next = $('#next').data('next');
            var num = $('#next').data('num');
            if(next == 1){
                location.href = '/active/commit-info.html?num='+num;
            }else{
                var chars = $('#next').data('chars');
                location.href = '/active/select-chars.html?num='+num+'&chars='+chars;
            }
        })
    });
</script>
</html>